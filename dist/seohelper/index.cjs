"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),a=require("@mui/material"),n=require("@mui/material/styles"),l=require("@mui/icons-material/Close"),i=require("firebase/app"),s=require("firebase/analytics"),r=require("firebase/auth"),o=require("axios"),d=require("@mui/icons-material/ArrowBack"),p=require("@mui/icons-material/ArrowForward"),c=require("@mui/material/LinearProgress"),u=require("@mui/lab/LoadingButton"),h=require("firebase/storage"),m=require("@mui/icons-material/InfoOutlined");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=f(e),E=f(t),y=f(l),b=f(o),x=f(d),v=f(p),w=f(c),C=f(u),I=f(m);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O.apply(this,arguments)}function j(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const k=()=>{let e={};return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID),e};var A;!function(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===a&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("/* Photos */\n\n.file-upload .file-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 140px;\n  opacity: 0;\n  outline: none;\n  cursor: pointer;\n}\n\n.file-upload .overlay {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  position: absolute;\n  z-index: 1;\n}\n\n.icon {\n  width: 75px;\n  margin-bottom: 1rem;\n}\n\n@media (max-width: 600px) {\n  .icon {\n    width: 50px;\n  }\n}\n\n.delete-btn-container {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  width: 100%;\n  height: 100%;\n  left: 0px;\n  top: 0px;\n}\n\n.delete-btn {\n  background: #2d3039;\n  margin: 20px auto;\n  width: 200px;\n  height: 50px;\n  overflow: hidden;\n  text-align: center;\n  transition: 0.4s;\n  cursor: pointer;\n  border-radius: 3px;\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);\n  z-index: 20;\n}\n\n.delete-btnText {\n  color: white;\n  transition: 0.3s;\n}\n.delete-btn:hover .delete-hoverBtn {\n  left: 0px;\n}\n.delete-btn:hover a {\n  margin-left: 65px;\n}\n.delete-hoverBtn {\n  position: relative;\n  width: 200px;\n  height: 100px;\n  margin-top: -100px;\n  padding-top: 2px;\n  background: #ed5565;\n  left: -250px;\n  transition: 0.3s;\n}\n.delete-hoverText {\n  margin-top: 55px;\n  margin-right: 0px;\n  text-align: center;\n  color: #fafafa;\n}\n.delete-hoverBtn:active {\n  box-shadow: 0px 5px 6px rgba(0, 0, 0, 0.3);\n  background-color: #da4453;\n}\n\n.fileViewer {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: flex-start;\n  max-height: 500;\n  padding-top: 20;\n  padding-bottom: 20;\n  border-top: #e3e3e3 solid 1px;\n  border-bottom: #e3e3e3 solid 1px;\n}\n\n.image-container {\n  width: 150px;\n  height: 150px;\n  margin: 10px;\n  border-radius: 2;\n}\n\n.file-details-section {\n  width: 45%;\n}\n\n@media only screen and (max-width: 600px) {\n  .fileViewer {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    max-height: 500;\n    padding-top: 20;\n    padding-bottom: 20;\n    border-top: 1px solid #e3e3e3;\n    border-bottom: 1px solid #e3e3e3;\n  }\n  .image-container {\n    width: 120px;\n    height: 120px;\n  }\n  .file-details-section {\n    width: 100%;\n  }\n}\n\n.carousel-frame-design {\n  position: relative;\n  width: 100%;\n  height: min(calc(90vh - 10px), 350px);\n  overflow: hidden;\n  background-color: white;\n  cursor: pointer;\n  box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0.1);\n  -webkit-box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0.1);\n  -moz-box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0.1);\n  transition: box-shadow 0.3s ease-in-out;\n  border: 1px #22211f dashed;\n}\n.carousel-frame-design:hover {\n  box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0.3);\n  -webkit-box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0.3);\n  -moz-box-shadow: 1px 2px 13px 1px rgba(34, 33, 31, 0);\n}\n\n.carousel-slide {\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n.carousel-slide img {\n  min-width: 100%;\n  object-fit: cover;\n}\n\n.carousel-prev {\n  position: absolute;\n  top: 50%;\n  left: 30px;\n  margin-top: -15px;\n  z-index: 10;\n  font-size: 30px;\n  color: rgba(255, 255, 255, 0.8);\n  cursor: pointer;\n}\n\n.carousel-next {\n  position: absolute;\n  top: 50%;\n  right: 30px;\n  margin-top: -15px;\n  z-index: 10;\n  font-size: 30px;\n  color: rgba(255, 255, 255, 0.8);\n  cursor: pointer;\n}\n\n.carousel-addPhotos {\n  position: absolute;\n  top: 10%;\n  right: 30px;\n  margin-top: -15px;\n  z-index: 10;\n  background-color: transparent;\n  cursor: pointer;\n  box-shadow: none;\n}\n\n.carousel-dots {\n  list-style: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 5%;\n  margin: 0 auto;\n  width: max(100px, 15%);\n  display: flex;\n  justify-content: space-between;\n}\n\n.carousel-dots li {\n  width: 8px;\n  height: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n}\n\n.carousel-dots .active-dot {\n  background-color: rgba(255, 255, 255, 0.8);\n}\n\n.event-box {\n  -webkit-box-shadow: 5px 5px 15px 5px rgba(0, 0, 0, 0.27);\n  box-shadow: 5px 5px 15px 5px rgba(0, 0, 0, 0.27);\n  transition: box-shadow 0.4s ease-in;\n  cursor: pointer;\n  width: 48%;\n  height: 50px;\n  min-width: 250px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.event-box:hover {\n  -webkit-box-shadow: 5px 5px 15px 5px rgba(0, 0, 0, 0.55);\n  box-shadow: 5px 5px 15px 5px rgba(0, 0, 0, 0.55);\n}\n");const N="Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?{apiKey:"AIzaSyDPjpRmobrdUtIY3hIaNoyox7alxYJH_B8",authDomain:"seo-manager-live.firebaseapp.com",projectId:"seo-manager-live",storageBucket:"seo-manager-live.appspot.com",messagingSenderId:"510256510596",appId:"1:510256510596:web:eae1ccc42cb103b8a7f4d1",measurementId:"G-RED1HCM49W"}:{apiKey:"AIzaSyBD6KEJFm2SVguRDEiqufIlRo5HuHu0IZg",authDomain:"seo-manager-test.firebaseapp.com",projectId:"seo-manager-test",storageBucket:"seo-manager-test.appspot.com",messagingSenderId:"682714204028",appId:"1:682714204028:web:a782b9da96ce811ee606f9",measurementId:"G-PYZDK47B2M"};let P;P=(null===(A=i.getApps())||void 0===A?void 0:A.findIndex((e=>"seo-manager"===(null==e?void 0:e.name))))<0?i.initializeApp(N,"seo-manager"):i.getApp("seo-manager");var M=P;function F(e,t,a,n){return new(a||(a=Promise))((function(l,i){function s(e){try{o(n.next(e))}catch(e){i(e)}}function r(e){try{o(n.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,r)}o((n=n.apply(e,t||[])).next())}))}const _="v1",L=(e,t="put",a,n,l)=>new Promise(((i,s)=>F(void 0,void 0,void 0,(function*(){var r,o,d;try{const d=k();if(!(null==d?void 0:d.projectId))return s({results:!1,error:"Project Id is required"});const p=U(e),c=n||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seomanager.dev/api/${_}/${p}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${_}/${p}`:`https://testing.seomanager.dev/api/${_}/${p}`);let u={X_ProjectId:null==d?void 0:d.projectId,X_ProjectKey:(null==d?void 0:d.projectKey)||""};l&&(u=Object.assign(Object.assign({},u),l));const h=yield b.default(c,{method:t,data:a||{},headers:u});return(null===(r=null==h?void 0:h.data)||void 0===r?void 0:r.results)?i({results:null===(o=null==h?void 0:h.data)||void 0===o?void 0:o.results}):i(null==h?void 0:h.data)}catch(e){return i({results:!1,data:null===(d=null==e?void 0:e.response)||void 0===d?void 0:d.data})}})))),U=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t},G=r.getAuth(M),z=r.getAuth(M),R=()=>{document.getElementById("close-seo-manager")?.click()},$=async()=>await r.signOut(z),q=h.getStorage(M),B=n.styled(a.Dialog)((({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2),width:"95vw",maxWidth:"900px"},"& .MuiDialogActions-root":{padding:e.spacing(1)},"& .MuiPaper-root":{margin:"0px",maxWidth:"none !important"}})));class H extends g.default.Component{constructor(e){super(e),T(this,"componentDidMount",(()=>{})),T(this,"deleteFile",(async()=>{this.setState({deleteLoading:!0});if("yes"===prompt("Are you sure you want to delete this file? (yes or no)")){alert(`File Location: ${this.props.file.location}`);const e=h.ref(q,this.props.file.location);await h.deleteObject(e),this.props.onDelete(this.props.file,this.props.idx),this.setState({deleteLoading:!1}),this.props.onClose()}this.setState({deleteLoading:!1})})),this.state={deleteLoading:!1}}render(){return g.default.createElement(g.default.Fragment,null,g.default.createElement(B,{onClose:this.props.onClose,"aria-labelledby":"customized-dialog-title",open:this.props.open,maxWidth:!1},g.default.createElement(a.DialogTitle,{sx:{m:0,p:2}},"File Details",g.default.createElement(a.IconButton,{"aria-label":"close",onClick:this.props.onClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},g.default.createElement(y.default,null))),g.default.createElement(a.DialogContent,null,g.default.createElement(a.Grid,{item:!0,xs:12,display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},this.props.isImage&&g.default.createElement(a.Grid,{className:"file-details-section",mt:2},g.default.createElement("img",{src:this.props.file.url,width:this.props.file?.dimensions?.width||"100%",height:this.props.file?.dimensions?.height||"auto",style:{width:"100%",height:"100%",objectFit:"contain",cursor:"pointer",zIndex:0}})),g.default.createElement(a.Grid,{className:"file-details-section",mt:2},g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"fileId",label:"File Id",variant:"standard",placeholder:"",value:this.props.file.fileId,style:{width:"100%"},disabled:!0})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"fileName",label:"File Name",variant:"standard",placeholder:"",value:this.props.file.fileName,style:{width:"100%"},disabled:!0})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"contentType",label:"Content Type",variant:"standard",placeholder:"",value:this.props.file.contentType,style:{width:"100%"},disabled:!0})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"fileSize",label:"File Size",variant:"standard",placeholder:"",value:`${this.props.file.size} bytes`,style:{width:"100%"},disabled:!0})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"url",label:"File Url",variant:"standard",placeholder:"",value:this.props.file.url,style:{width:"100%"},disabled:!0})),this.props.file.dimensions&&g.default.createElement(g.default.Fragment,null,g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"fileWidth",label:"Image Width",variant:"standard",placeholder:"",value:`${this.props.file.dimensions.width}px`,style:{width:"100%"},disabled:!0})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"fileHeight",label:"Image Height",variant:"standard",placeholder:"",value:`${this.props.file.dimensions.height}px`,style:{width:"100%"},disabled:!0}))),this.props.file.timeStamp&&g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"date",label:"File Uploaded on",variant:"standard",placeholder:"",value:new Date(this.props.file.timeStamp).toString(),style:{width:"100%"},disabled:!0}))))),g.default.createElement(a.DialogActions,null,g.default.createElement("div",{className:"modal-footer",style:{width:"100%",display:"flex",flexDirection:"column"}},g.default.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},g.default.createElement(a.Button,{variant:"text",id:"close-seo-manager",onClick:this.props.onClose,type:"button"},"Close"),g.default.createElement(C.default,{variant:"text",onClick:this.deleteFile,type:"button",loading:this.state.deleteLoading},"Delete"))))))}}class W extends g.default.Component{constructor(e){super(e),T(this,"isImage",(()=>this.state.imageTypes.find((e=>e===this.props.item.contentType)))),this.state={imageTypes:["image/png","image/jpg","image/jpeg","image/webp","image/apng","image/avif","image/gif","image/svg+xml"],fileDetail:!1}}render(){const e=this.isImage();return g.default.createElement(g.default.Fragment,null,g.default.createElement(H,{onClose:()=>{this.setState({fileDetail:!1})},open:this.state.fileDetail,onDelete:this.props.onDelete,file:this.props.item,idx:this.props.idx,isImage:e}),g.default.createElement("div",{style:{border:this.props.isClicked?"2px solid #8a8a8a":"1px dashed #e3e3e3"},className:"image-container"},g.default.createElement("div",{style:{width:"100%",position:"relative"}},g.default.createElement("div",{style:{position:"absolute",right:-15,top:-15}},g.default.createElement(I.default,{fontSize:"medium",onClick:()=>{this.setState({fileDetail:!0})},style:{cursor:"pointer",backgroundColor:"white",borderRadius:100}}))),e&&g.default.createElement("img",{src:this.props.item?.url,width:this.props.item?.dimensions?.width||"100%",height:this.props.item?.dimensions?.height||"auto",onClick:this.props.onClick,style:{width:"100%",height:"100%",objectFit:"contain",cursor:"pointer",zIndex:0}}),!e&&g.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",cursor:"pointer"},onClick:this.props.onClick},g.default.createElement(a.Typography,{textAlign:"center"},this.props.item.fileName||this.props.item.contentType))))}}const X=h.getStorage(M),J=r.getAuth(M),K=n.styled(a.Dialog)((({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2),width:"95vw",maxWidth:"900px"},"& .MuiDialogActions-root":{padding:e.spacing(1)},"& .MuiPaper-root":{margin:"0px",maxWidth:"none !important"}})));class V extends g.default.Component{constructor(e){super(e),T(this,"componentDidMount",(()=>{})),T(this,"componentDidUpdate",(e=>{!0===this.props.open&&!1===e.open&&(this.setState({loading:!0,selected:!0===this.props.multiple&&this.props.selected?{url:"",fileId:""}:D({},this.props.selected),selectedArray:!0===this.props.multiple&&this.props.selected?[...this.props.selected]:[]}),this.getData()),!1===this.props.open&&!0===e.open&&(this.setState({loading:!0,selected:{url:"",fileId:""},selectedArray:[],fileError:""}),this.getData()),JSON.stringify(this.props.selected)!==JSON.stringify(e.selected)&&this.setState({selected:!0===this.props.multiple&&this.props.selected?{url:"",fileId:""}:D({},this.props.selected),selectedArray:!0===this.props.multiple&&this.props.selected?[...this.props.selected]:[]})})),T(this,"getData",(async()=>{const e=await L("/files/getProjectFiles","get",{},void 0,{X_Authorization:await(J?.currentUser?.getIdToken()),AuthorizationId:J?.currentUser?.uid});e.results.files.length>0?this.setState({files:e.results.files,loading:!1}):this.setState({loading:!1})})),T(this,"imageClicked",(e=>{const t={url:e.url,fileId:e.fileId};if(this.props.accept&&!this.props?.accept?.includes(e?.contentType))return this.setState({fileError:`Only accepting ${this.props.accept}`});if(this.setState({fileError:""}),!0===this.props.multiple){let a=[];this.state.selectedArray&&(a=[...this.state.selectedArray]);const n=a.findIndex((t=>{if(t.fileId===e.fileId)return!0}));n>=0?(a.splice(n,1),this.setState({selectedArray:a})):(a.push(t),this.setState({selectedArray:a}))}else this.state.selected.fileId===e.fileId?this.setState({selected:{url:"",fileId:""}}):this.setState({selected:t})})),T(this,"addFile",(e=>{const t=((e,t)=>{let a=[];for(let t in e.target.files){let n=e.target.files[t];n&&n.type&&(e.target.files[t],n.localURL=URL.createObjectURL(n),a.push({object:n,name:n.name}))}return{results:a}})(e);if(t&&!t.error&&t.results.length>0){let e=t.results;this.uploadNewFile(e)}else t.error&&this.setState({fileError:t.error})})),T(this,"uploadNewFile",(e=>new Promise((async(t,a)=>{try{const t=await(J?.currentUser?.getIdToken()),a=await L("/files/generateFileIds","post",{type:"default",qty:e.length+1},void 0,{X_Authorization:t,AuthorizationId:J?.currentUser?.uid}),n=Object.keys(e||[]).map((n=>new Promise((async(l,i)=>{const s=e[n],r=s.object,o=s.name,d=a.results.photoId[n],p={contentType:r.type,cacheControl:"public,max-age=604800",customMetadata:{type:"default",userIdToken:t,userId:J?.currentUser?.uid,fileName:o,fileId:d,projectId:this.props.projectId}},c=`projects/${this.props.projectId}/files/${d}`,u=h.ref(X,c),m=h.uploadBytesResumable(u,r,p);return m.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100,a=this.state.uploadProgress;a[d]=t,this.setState({uploadProgress:a})}),(e=>(console.error("Error:",e),l({error:!0,results:!1}))),(()=>{h.getDownloadURL(m.snapshot.ref).then((e=>{const t={url:e,fileId:d,contentType:r.type,size:r.size,location:c,fileName:o};return l(t)}))}))})))),l=[...await Promise.all(n),...this.state.files];this.setState({files:l,fileError:"",uploadProgress:{}})}catch(e){console.error("Error:",e),this.setState({uploadProgress:{}})}})))),T(this,"save",(()=>{!0===this.props.multiple?this.props.onChangeComplete(this.state.selectedArray):this.props.onChangeComplete(this.state.selected),this.props.onClose()})),T(this,"fileDeleted",((e,t)=>{const a=this.state.files;if(a.splice(t,1),this.setState({files:a}),!0===this.props.multiple){let t=this.state.selectedArray;const a=t.findIndex((t=>{if(t.fileId===e.fileId)return!0}));a>=0&&(t.splice(a,1),this.setState({selectedArray:t}),this.props.onChangeComplete(t))}else{let t=this.state.selected;e.fileId===t.fileId&&(this.setState({selected:{url:"",fileId:""}}),this.props.onChangeComplete({url:"",fileId:""}))}}));const{selected:t,multiple:a}=e;this.state={files:[],loading:!0,selected:!0===a&&t?{url:"",fileId:""}:D({},t),selectedArray:!0===a&&t?[...t]:[],fileError:"",uploadProgress:{}}}render(){let e=0,t=0;Object.keys(this.state.uploadProgress).forEach((a=>{const n=this.state.uploadProgress[a];e+=100,t=n}));const n=t/e*100;return g.default.createElement(g.default.Fragment,null,g.default.createElement(K,{onClose:this.props.onClose,"aria-labelledby":"customized-dialog-title",open:this.props.open,maxWidth:!1},g.default.createElement(a.DialogTitle,{sx:{m:0,p:2}},"File Manager",g.default.createElement(a.IconButton,{"aria-label":"close",onClick:this.props.onClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},g.default.createElement(y.default,null))),g.default.createElement(a.DialogContent,null,this.state.loading&&g.default.createElement("div",{style:{width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"}},g.default.createElement(a.CircularProgress,null)),!1===this.state.loading&&this.state?.files?.length>0&&g.default.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:150}},g.default.createElement("div",{style:{},className:"top"},this.props.accept&&g.default.createElement(a.Grid,{item:!0,xs:12,mb:2},g.default.createElement(a.Typography,{textAlign:"center"},"Only accepting ",this.props.accept))),g.default.createElement("div",{className:"fileViewer"},this.state.files.map(((e,t)=>{let a=!1;if(!0===this.props.multiple){this.state.selectedArray.find((t=>t.fileId===e.fileId))&&(a=!0)}else this.state.selected.fileId===e.fileId&&(a=!0);return g.default.createElement(W,{isClicked:a,key:`Photo-${t}`,onClick:()=>this.imageClicked(e),item:e,idx:t,onDelete:this.fileDeleted})})))),!1===this.state.loading&&0===this.state?.files?.length&&g.default.createElement("div",{style:{width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"}},g.default.createElement(a.Typography,null,"Add your first files"))),g.default.createElement(a.DialogActions,null,g.default.createElement("div",{className:"modal-footer",style:{width:"100%",display:"flex",flexDirection:"column"}},!1===this.state.loading&&g.default.createElement("div",{className:"file-upload carousel-frame-design",style:{width:"100%",height:140,marginBottom:10}},g.default.createElement("input",{className:"file-input",type:"file",onChange:this.addFile,multiple:!0,style:{zIndex:2}}),g.default.createElement("iframe",{src:"https://embed.lottiefiles.com/animation/27938",style:{height:"100%",width:"100%",zIndex:0,position:"absolute"}}),g.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end",paddingBottom:5}},g.default.createElement(a.Typography,{component:"p",style:{opacity:.5}},g.default.createElement("i",null,"Click or Drag-n-Drop")))),n<100&&g.default.createElement(a.Box,{sx:{width:"100%"}},g.default.createElement(w.default,{variant:"determinate",value:n})),this.state.fileError&&g.default.createElement("div",{className:"alert alert-danger d-flex align-items-center mb-3",role:"alert",style:{width:"100%"}},g.default.createElement(a.Typography,null,this.state.fileError)),g.default.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},g.default.createElement(a.Button,{variant:"text",id:"close-seo-manager",onClick:this.props.onClose,type:"button"},"Close"),g.default.createElement(C.default,{variant:"text",onClick:this.save,type:"button",loading:!1},"Save"))))))}}class Y extends g.default.Component{constructor(e){super(e),T(this,"componentDidUpdate",(e=>{JSON.stringify(e.files)!==JSON.stringify(this.props.files)&&(this.setState({files:""!==this.props?.files?.[0]?.url?Object.keys(this.props?.files||[]).map((e=>{const t=this.props?.files[e];return t.url})):[]}),this.props.files.length>0?this.compileData():this.state.autoAdvancedInterval&&clearInterval(this.state.autoAdvancedInterval))})),T(this,"componentDidMount",(()=>{this.props.files.length>0&&this.compileData()})),T(this,"compileData",(()=>{setTimeout((()=>{const e=Array.from(document.querySelectorAll(".carousel-frame")),t=e=>{const t=e.querySelector(".carousel-slide"),a=function(){let a=e.querySelectorAll(".carousel-slide img");const n=a[0].cloneNode(),l=a[a.length-1].cloneNode();return n.className="first-clone",l.className="last-clone",t.append(n),t.prepend(l),a=e.querySelectorAll(".carousel-slide img"),a}(),n=e?.querySelector(".carousel-prev"),l=e?.querySelector(".carousel-next"),i=Array.from(e.querySelectorAll(".carousel-dots li"));let s=1;function r(){s>=a.length-1||(t.style.transition="transform 400ms",s++,t.style.transform=`translateX(-${100*(s>1?s:2)}%)`)}function o(){s<=0||(t.style.transition="transform 400ms",s--,t.style.transform=`translateX(-${100*s}%)`)}function d(e){t.style.transition="transform 400ms",s=1+i.indexOf(e.target),t.style.transform=`translateX(-${100*s}%)`}const p=()=>{!0===this.state.started&&(l?.removeEventListener("click",r),n?.removeEventListener("click",o)),l?.addEventListener("click",r),n?.addEventListener("click",o)},c=()=>{i.forEach((e=>{!0===this.state.started&&e?.removeEventListener("click",d),e?.addEventListener("click",d)}))},u=()=>{const e=()=>{a[s].classList.contains("last-clone")&&(t.style.transition="none",s=a.length-2,t.style.transform=`translateX(-${100*s}%)`),a[s].classList.contains("first-clone")&&(t.style.transition="none",s=a.length-s,t.style.transform=`translateX(-${100*s}%)`),i.forEach((e=>{i.indexOf(e)===s-1?e.classList.add("active-dot"):e.classList.remove("active-dot")}))};!0===this.state.started&&t?.removeEventListener("transitionend",e),t.addEventListener("transitionend",e)};t.style.transform="translateX(-100%)",i.length&&i[0].classList.add("active-dot"),c(),p(),u(),this.setState({started:!0})};e.forEach((e=>t(e)))}),100)})),this.state={files:""!==e?.files?.[0]?.url?Object.keys(e?.files||[]).map((t=>{const a=e?.files[t];return a.url})):[],openPhotoManager:!1,autoAdvancedInterval:null,buttonListeners:!1,started:!1}}render(){return g.default.createElement(g.default.Fragment,null,g.default.createElement(V,{open:this.state.openPhotoManager,onChangeComplete:this.props.onChangeComplete,onClose:()=>{this.setState({openPhotoManager:!1})},multiple:this.props.multiple,selected:!0===this.props.multiple?this.props.files:this.props.files[0],data:this.props.data,accept:this.props.accept,projectId:this.props.projectId}),this.state.files.length>0&&g.default.createElement("div",{className:"carousel-frame-design carousel-frame",onClick:()=>{this.setState({openPhotoManager:!0})}},g.default.createElement("div",{className:"carousel-slide"},Object.keys(this.state.files||[]).map((e=>{const t=this.state.files[e];return g.default.createElement("img",{src:t,key:`file-${e}`})}))),this.state.files.length>1&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"carousel-prev"},g.default.createElement(x.default,{fontSize:"medium"})),g.default.createElement("div",{className:"carousel-next"},g.default.createElement(v.default,{fontSize:"medium"})),g.default.createElement("ol",{className:"carousel-dots"},Object.keys(this.state.files||[]).map((e=>g.default.createElement("li",{key:`file-${e}`})))))),0===this.state.files.length&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"carousel-frame-design",style:{height:300,cursor:"pointer"},onClick:()=>{this.setState({openPhotoManager:!0})}},g.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end",paddingBottom:20,position:"absolute",zIndex:1}},g.default.createElement(a.Typography,{component:"p",style:{opacity:.5}},g.default.createElement("i",null,"Click to Select or Upload File"))),g.default.createElement("div",{style:{zIndex:-1,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},g.default.createElement("iframe",{src:"https://embed.lottiefiles.com/animation/27938",style:{height:"100%",width:"100%"}})))))}}class Z extends g.default.Component{constructor(e){super(e),T(this,"componentDidMount",(()=>{this.init()})),T(this,"componentWillUnmount",(()=>{this.state.interval&&(clearInterval(this.state.interval),this.setState({interval:null}))})),T(this,"init",(()=>{const e=setInterval((async()=>{this.setUserToken()}),6e4);this.setUserToken(),this.setState({interval:e})})),T(this,"setUserToken",(async()=>{const e=await new Promise((e=>F(void 0,void 0,void 0,(function*(){const t=r.getIdToken(G.currentUser,!0);return e(t)}))));this.setState({userToken:e})})),T(this,"openWindow",(()=>{const e="Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seomanager.dev/dashboard/?userToken=${this.state.userToken}&projectId=${this.props.projectId}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/dashboard/?userToken=${this.state.userToken}&projectId=${this.props.projectId}`:`https://testing.seomanager.dev/dashboard/?userToken=${this.state.userToken}&projectId=${this.props.projectId}`;window.open(e,"_blank")})),this.state={interval:null,userToken:""}}render(){return window?.location?.href?.includes("seomanager.dev/dashboard")?null:this.state.userToken?g.default.createElement(g.default.Fragment,null,g.default.createElement(a.Button,{variant:"text",onClick:this.openWindow,type:"button"},"Open Dashboard")):null}}const Q=["children","value","index"],ee=r.getAuth(M);class te extends g.default.Component{constructor(e){super(e),T(this,"componentDidMount",(async()=>{this.setState({loading:!0}),ee?.currentUser?.getIdToken().then((async e=>{const t=await L("/seo/authorized_get","put",{path:this.props.data?.page?.path||""},void 0,{X_Authorization:e,AuthorizationId:ee?.currentUser?.uid});var a;t?.results?.seoRequest&&(this.props.onChange(t?.results?.seoRequest,!0),a=t?.results?.seoRequest,process.env.SEO_MANAGER_MODULE_PROJECT=JSON.stringify(a)),this.setState({loading:!1,isNewPage:!!t?.results?.isNewPage})}))})),T(this,"onPageChange",((e,t)=>{let a=D({},this.props.data),n=this.state.savedLocations;a.page[t]=e,n.page=!0,this.props.onChange(a,!1),this.setState({data:a,savedLocations:n})})),T(this,"onGlobalChange",((e,t)=>{let a=D({},this.props.data),n=this.state.savedLocations;a.global[t]=e,n.global=!0,this.props.onChange(a,!1),this.setState({data:a,savedLocations:n})})),T(this,"addPerformAction",((e,t)=>{let a=this.state.performActionOnUpdate;a[t]=e,this.setState({performActionOnUpdate:a})})),T(this,"saveData",(()=>{this.setState({saving:!0}),ee?.currentUser?.getIdToken().then((async e=>{const t=Object.keys(this.state.performActionOnUpdate||[]).map((async e=>{const t=this.state.performActionOnUpdate[e];return t&&t.action&&await t.action(),!0}));if(await Promise.all(t),!0===this.state.isNewPage){const t=await L("/seo/create","post",{data:this.props.data,savedLocations:this.state.savedLocations},void 0,{X_Authorization:e,AuthorizationId:ee?.currentUser?.uid});t?.results&&this.props.onChangeComplete&&this.props.onChangeComplete(t?.results),this.setState({saving:!1}),t?.error||R()}else{const t=await L("/seo/update","put",{data:this.props.data,savedLocations:this.state.savedLocations},void 0,{X_Authorization:e,AuthorizationId:ee?.currentUser?.uid});t?.results&&this.props.onChangeComplete&&this.props.onChangeComplete(t?.results),this.setState({saving:!1}),t?.error||R()}}))})),this.state={loading:!0,saving:!1,newImage:"",file:null,performActionOnUpdate:{},photoManager:!0,tabIndex:0,savedLocations:{},isNewPage:!1}}render(){return g.default.createElement(g.default.Fragment,null,this.state.loading?g.default.createElement(a.DialogContent,{dividers:!0},g.default.createElement("div",{style:{width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"}},g.default.createElement(a.CircularProgress,null))):g.default.createElement(g.default.Fragment,null,g.default.createElement(a.DialogContent,{dividers:!0},g.default.createElement(a.Grid,{item:!0,xs:12},g.default.createElement(a.Box,{sx:{borderBottom:1,borderColor:"divider"}},g.default.createElement(a.Tabs,{value:this.state.tabIndex,onChange:(e,t)=>{this.setState({tabIndex:t})},"aria-label":"Select SEO Manager Options"},g.default.createElement(a.Tab,O({label:"Page"},ne(0))),g.default.createElement(a.Tab,O({label:"Global"},ne(1))),g.default.createElement(a.Tab,O({label:"Account"},ne(3)))))),g.default.createElement(a.Grid,{item:!0,xs:12,mt:2,display:"flex",justifyContent:"center"},g.default.createElement(Z,{projectId:this.props?.data?.projectId})),g.default.createElement(ae,{value:this.state.tabIndex,index:0},g.default.createElement(a.Grid,{item:!0,xs:12},g.default.createElement("div",{className:"form-floating mb-3"},g.default.createElement(Y,{files:this.props?.data?.page?.image?[this.props.data.page.image]:[{url:"",fileId:""}],onChangeComplete:e=>{const t=e?.url?e:{url:"",fileId:""};this.onPageChange(t,"image")},multiple:!1,accept:"image/png, image/jpeg, image/jpg, image/webp",data:this.props.data.page,projectId:this.props?.data?.projectId}))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"page-path",label:"Page Path",variant:"standard",placeholder:"",value:this.props.data?.page?.path||"",style:{width:"100%"},onChange:e=>{let t=e.target.value;"/"!==t?.[0]&&(t=`/${t}`),this.onPageChange(t,"path")}})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"title",label:"Title",variant:"standard",placeholder:"Home - Stark Industries",onChange:e=>{this.onPageChange(e.target.value,"title")},value:this.props.data?.page?.title||"",style:{width:"100%"},helperText:`${this.props.data?.page?.title.length||0} of 60 (recommended)`})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"description",label:"Description",variant:"standard",placeholder:"",onChange:e=>{this.onPageChange(e.target.value,"description")},value:this.props.data?.page?.description,style:{width:"100%"},multiline:!0,helperText:`${this.props.data?.page?.description.length||0} of 160 (recommended)`})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.Autocomplete,{multiple:!0,id:"tags-keywords",options:[],defaultValue:this.props?.data?.page?.keywordsArray||[],freeSolo:!0,onChange:(e,t)=>{this.onPageChange(t,"keywordsArray")},renderTags:(e,t)=>e.map(((e,n)=>g.default.createElement(a.Chip,O({variant:"outlined",label:e},t({index:n}))))),renderInput:e=>g.default.createElement(a.TextField,O({},e,{variant:"standard",label:"Keywords",placeholder:"Add Keywords"}))})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.FormControl,{variant:"standard",sx:{minWidth:"100%"}},g.default.createElement(a.InputLabel,{id:"follow"},"Should search engines follow the page?"),g.default.createElement(a.Select,{labelId:"follow",id:"follow-select",value:this.props.data?.page?.follow,onChange:e=>{this.onPageChange(e.target.value,"follow")},label:"Should search engines follow the page?",style:{zIndex:10}},g.default.createElement(a.MenuItem,{value:""},"Select Follow Option"),g.default.createElement(a.MenuItem,{value:"follow"},"Follow"),g.default.createElement(a.MenuItem,{value:"nofollow"},"No Follow")))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.FormControl,{variant:"standard",sx:{minWidth:"100%"}},g.default.createElement(a.InputLabel,{id:"index"},"Should search engines index the page?"),g.default.createElement(a.Select,{labelId:"index",id:"index-select",value:this.props.data.page?.index,onChange:e=>{this.onPageChange(e.target.value,"index")},label:"Should search engines index the page?"},g.default.createElement(a.MenuItem,{value:""},"Select Index Option"),g.default.createElement(a.MenuItem,{value:"index"},"Index"),g.default.createElement(a.MenuItem,{value:"noindex"},"No Index")))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.FormControl,{variant:"standard",sx:{minWidth:"100%"}},g.default.createElement(a.InputLabel,{id:"changeFreq"},"How often will the content change?"),g.default.createElement(a.Select,{labelId:"changeFreq",id:"changeFreq-select",value:this.props.data.page?.changeFreq,onChange:e=>{this.onPageChange(e.target.value,"changeFreq")},label:"How often will the content change?"},g.default.createElement(a.MenuItem,null,"Select Frequency"),g.default.createElement(a.MenuItem,{value:"always"},"Always"),g.default.createElement(a.MenuItem,{value:"daily"},"Daily"),g.default.createElement(a.MenuItem,{value:"weekly"},"Weekly"),g.default.createElement(a.MenuItem,{value:"monthly"},"Monthly"),g.default.createElement(a.MenuItem,{value:"yearly"},"Yearly"),g.default.createElement(a.MenuItem,{value:"never"},"Never")))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.FormControl,{variant:"standard",sx:{minWidth:"100%"}},g.default.createElement(a.InputLabel,{id:"priority"},"Page Prority (10 Highest)"),g.default.createElement(a.Select,{labelId:"priority",id:"priority-select",value:this.props.data.page?.priority,onChange:e=>{this.onPageChange(e.target.value,"priority")},label:"Page Priority (10 being the highest)"},g.default.createElement(a.MenuItem,null,"Select Page Priority"),g.default.createElement(a.MenuItem,{value:.1},"1"),g.default.createElement(a.MenuItem,{value:.2},"2"),g.default.createElement(a.MenuItem,{value:.3},"3"),g.default.createElement(a.MenuItem,{value:.4},"4"),g.default.createElement(a.MenuItem,{value:.5},"5"),g.default.createElement(a.MenuItem,{value:.6},"6"),g.default.createElement(a.MenuItem,{value:.7},"7"),g.default.createElement(a.MenuItem,{value:.8},"8"),g.default.createElement(a.MenuItem,{value:.9},"9"),g.default.createElement(a.MenuItem,{value:1},"10")))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"ldJson",label:"Structured Data",variant:"standard",placeholder:"",onChange:e=>{this.onPageChange(e.target.value,"ldJson")},value:this.props.data?.page?.ldJson,style:{width:"100%"},multiline:!0}))),g.default.createElement(ae,{value:this.state.tabIndex,index:1},g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"default-title",label:"Default Title",variant:"standard",placeholder:"",onChange:e=>{this.onGlobalChange(e.target.value,"defaultTitle")},value:this.props.data?.global?.defaultTitle,style:{width:"100%"},multiline:!0,helperText:`${this.props.data?.global?.defaultTitle.length||0} of 60 (recommended)`})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"default-description",label:"Default Description",variant:"standard",placeholder:"",onChange:e=>{this.onGlobalChange(e.target.value,"defaultDescription")},value:this.props.data?.global?.defaultDescription,style:{width:"100%"},multiline:!0,helperText:`${this.props.data?.global?.defaultDescription.length||0} of 160 (recommended)`})),g.default.createElement(a.Grid,{item:!0,xs:12},g.default.createElement("div",{className:"form-floating mb-3"},g.default.createElement(Y,{files:this.props?.data?.global?.favicon?.fileId?[this.props.data.global.favicon]:[{url:"",fileId:""}],onChangeComplete:e=>{const t=e?.url?e:{url:"",fileId:""};this.onGlobalChange(t,"favicon")},multiple:!1,accept:"image/png, image/jpeg, image/jpg, image/webp",data:this.props.data.page,projectId:this.props?.data?.projectId}))),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"navbar-color",label:"Pick a Navigation Theme Color",variant:"standard",type:"color",value:this.props?.data?.global?.themeColor||"#FFFFFF",style:{width:"100%"},onChange:e=>{this.onGlobalChange(e.target.value,"themeColor")}}))),g.default.createElement(ae,{value:this.state.tabIndex,index:2},g.default.createElement(a.Grid,{container:!0},g.default.createElement(a.Grid,{item:!0,mb:1,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},g.default.createElement(a.Button,{variant:"text",onClick:$,type:"button",mt:5},"Sign Out"))))),g.default.createElement(a.DialogActions,null,g.default.createElement("div",{className:"modal-footer",style:{width:"100%"}},g.default.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},g.default.createElement(a.Button,{variant:"text",id:"close-seo-manager",onClick:this.props.resetData,type:"button"},"Close"),g.default.createElement(C.default,{variant:"text",onClick:this.saveData,type:"button",loading:this.state.saving},"Save"))))))}}function ae(e){const{children:t,value:n,index:l}=e,i=j(e,Q);return g.default.createElement("div",O({role:"tabpanel",hidden:n!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`},i),n===l&&g.default.createElement(a.Box,{sx:{p:3}},t))}function ne(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}ae.propTypes={children:E.default.node,index:E.default.number.isRequired,value:E.default.number.isRequired};const le=r.getAuth(M);class ie extends g.default.Component{constructor(e){super(e),T(this,"componentDidMount",(()=>{this.setState({loading:!0,user:!1,loaded:!0}),this.authentication()})),T(this,"componentDidUpdate",(e=>{this.props?.open!==e?.open&&this.setState({openManager:!!this.props?.open})})),T(this,"authentication",(()=>{const e=["owner","admin","editor"];r.onAuthStateChanged(le,(async t=>{if(t){const a=await t.getIdTokenResult(!0),n=D(D({},t),{},{customClaims:a.claims});a?.claims?.[this.state.projectId]&&e.includes(a?.claims?.[this.state.projectId])?this.setState({authorizedUser:!0}):this.setState({authorizedUser:!1}),this.setState({user:n})}else this.setState({user:!1});this.setState({loading:!1}),s.getAnalytics(M)}))})),T(this,"checkComponentErrors",(({head:e,data:t,onChangeComplete:a,onClose:n,open:l,isNewPage:i})=>{if(!e)throw"Please add this tag to your SEOHelper component 'head={(data) => (<Head>{data}</Head>)}'. If your not using NextJS replace <Head>{data}</Head> with <Helmet>{data}</Helmet> from npm react-helmet."})),T(this,"formatHead",(e=>e&&!1!==e.valid?g.default.createElement(g.default.Fragment,null,g.default.createElement("meta",{property:"og:locale",content:"en_US"}),g.default.createElement("meta",{property:"og:type",content:"website"}),g.default.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),g.default.createElement("meta",{name:"robots",content:`${e?.page?.index||"index"}, ${e?.page?.follow||"follow"}`}),e?.global?.themeColor&&g.default.createElement("meta",{name:"theme-color",content:e?.global?.themeColor}),e?.global?.favicon?.url&&g.default.createElement("link",{rel:"icon",type:"image/x-icon",href:e.global.favicon.url,sizes:"192x192"}),e?.global?.canonicalURL&&e?.page?.path&&g.default.createElement("link",{href:`${e.global.canonicalURL}${e.page.path}`,rel:"canonical"}),e?.global?.canonicalURL&&e?.page?.path&&g.default.createElement("meta",{property:"og:url",content:`${e.global.canonicalURL}${e.page.path}`}),e?.page?.image?.url&&g.default.createElement("meta",{property:"og:image",content:e.page.image.url}),e?.page?.image?.url&&g.default.createElement("meta",{name:"twitter:image",content:e.page.image.url}),g.default.createElement("title",null,e?.page?.title||e?.global?.defaultTitle||""),g.default.createElement("meta",{property:"og:title",content:e?.page?.title||e?.global?.defaultTitle||""}),g.default.createElement("meta",{name:"twitter:title",content:e?.page?.title||e?.global?.defaultTitle||""}),g.default.createElement("meta",{name:"description",content:e?.page?.description||e?.global?.defaultDescription||"",key:"description"}),g.default.createElement("meta",{property:"og:description",content:e?.page?.description||e?.global?.defaultDescription||""}),g.default.createElement("meta",{name:"twitter:description",content:e?.page?.description||e?.global?.defaultDescription||""}),e?.page?.keywords&&g.default.createElement("meta",{name:"keywords",content:e.page.keywords}),e?.page?.ldJson&&g.default.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:e.page.ldJson}}),e?.page?.events&&g.default.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e.page.events)}}),this.props.children):null)),T(this,"signIn",(async e=>{e.preventDefault(),this.setState({loading:!0}),r.signInWithEmailAndPassword(le,this.state.email,this.state.password).then((e=>{this.setState({loading:!1})})).catch((e=>{e.message,this.setState({loginError:e.code,loading:!1})}))})),T(this,"signOut",(async()=>{await r.signOut(le)})),T(this,"resetData",(()=>{this.props?.onClose&&this.props.onClose(),this.setState({data:this.state.dataOriginal,openManager:!1})})),T(this,"updateData",((e,t)=>{this.setState({data:e}),!0===t&&this.setState({dataOriginal:e})})),T(this,"openManager",(e=>{this.setState({openManager:!0})})),T(this,"handleClose",(()=>{}));const{head:t,data:a,onChangeComplete:n,onClose:l,open:i,isNewPage:o}=e;this.checkComponentErrors({head:t,data:a,onChangeComplete:n,onClose:l,open:i,isNewPage:o});const d=k();this.state={data:a,dataOriginal:a,head:t(this.formatHead(a)),loading:!0,loaded:!1,open:!0,user:null,email:"",password:"",loginError:"",projectId:d.projectId,authorizedUser:!1,openManager:!!i}}render(){return g.default.createElement(g.default.Fragment,null,!1===this.state.loaded&&null===this.state.user?g.default.createElement(g.default.Fragment,null,this.state.head):g.default.createElement(g.default.Fragment,null,this.props.head(this.formatHead(this.state.data))),g.default.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",id:"open-seo-manager",style:{display:"none"},onClick:this.openManager}),g.default.createElement(se,{onClose:this.resetData,"aria-labelledby":"customized-dialog-title",open:this.state.openManager,maxWidth:!1,style:{zIndex:100}},g.default.createElement(a.DialogTitle,{sx:{m:0,p:2}},"SEO Manager",g.default.createElement(a.IconButton,{"aria-label":"close",onClick:this.resetData,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},g.default.createElement(y.default,null))),this.state.user&&!0===this.state.authorizedUser&&!0===this.state.openManager&&g.default.createElement(te,{onChange:this.updateData,data:this.state.data,dataOriginal:this.state.dataOriginal,resetData:this.resetData,onChangeComplete:this.props.onChangeComplete,user:this.state.user,isNewPage:this.props.isNewPage}),!1===this.state.user&&!1===this.state.loading&&g.default.createElement(a.DialogContent,null,g.default.createElement("form",{onSubmit:this.signIn},g.default.createElement(a.Typography,null,"Please login to your SEO Manager Account to continue"),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"email",label:"Email address",variant:"standard",placeholder:"name@example.com",onChange:e=>{this.setState({email:e.target.value})},required:!0,style:{width:"100%"}})),g.default.createElement(a.Grid,{item:!0,mb:1},g.default.createElement(a.TextField,{id:"password",label:"Password",variant:"standard",onChange:e=>{this.setState({password:e.target.value})},required:!0,type:"password",style:{width:"100%"}})),this.state.loginError&&g.default.createElement("div",{className:"alert alert-danger d-flex align-items-center",role:"alert",style:{marginTop:15}},g.default.createElement("svg",{className:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Danger:"},g.default.createElement("use",{xlinkHref:"#exclamation-triangle-fill"})),g.default.createElement("div",null,this.state.loginError)),g.default.createElement("div",{className:"d-grid gap-2"},g.default.createElement(a.Button,{variant:"contained",type:"submit",style:{marginTop:15},fullWidth:!0},"Login")))),!1===this.state.loading&&this.state.user&&!1===this.state.authorizedUser&&g.default.createElement(g.default.Fragment,null,g.default.createElement(a.DialogContent,null,g.default.createElement("p",null,"Unfortunately it appears you are not authorized to make changes to this website! Is it possible your signed in on the wrong account?"," ",g.default.createElement("a",{onClick:this.signOut,style:{cursor:"pointer"}},g.default.createElement("strong",null,"Click Here to Sign Out"))))),!0===this.state.loading&&g.default.createElement(a.DialogContent,{dividers:!0},g.default.createElement("div",{style:{width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"}},g.default.createElement(a.CircularProgress,null)))))}}ie.propTypes={head:E.default.any.isRequired,data:E.default.any.isRequired,onChangeComplete:E.default.any,onClose:E.default.any,open:E.default.bool,isNewPage:E.default.bool};const se=n.styled(a.Dialog)((({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2),width:"95vw",maxWidth:"900px"},"& .MuiDialogActions-root":{padding:e.spacing(1)},"& .MuiPaper-root":{margin:"0px",maxWidth:"none !important"}})));exports.SEOHelper=ie;
