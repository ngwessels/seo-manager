import{getApps as e,initializeApp as r,getApp as o}from"firebase/app";import{getAuth as t}from"firebase/auth";import n from"axios";const s=e=>{const r=i()||{};let o=Object.assign({},r);const{projectId:t,projectKey:n,secretKey:s}=e;if(t&&(o.projectId=t,process.env.SEO_MANAGER_MODULE_PROJECTID=t),n&&(o.projectKey=n,process.env.SEO_MANAGER_MODULE_PROJECTKEY=n),s&&(o.secretKey=s,process.env.SEO_MANAGER_MODULE_SECRETKEY=s),!(null==o?void 0:o.projectId))throw"Please add a projectId by calling the SEOInit function SEOInit({projectId: '<<Add Value Here>>'})";return!0},i=()=>{let e={};return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID),e},a=e=>{process.env.SEO_MANAGER_MODULE_PROJECT=JSON.stringify(e)},d=()=>{const e=process.env.SEO_MANAGER_MODULE_PROJECT;return e?JSON.parse(e):null};function l(e,r,o,t){return new(o||(o=Promise))((function(n,s){function i(e){try{d(t.next(e))}catch(e){s(e)}}function a(e){try{d(t.throw(e))}catch(e){s(e)}}function d(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,a)}d((t=t.apply(e,r||[])).next())}))}var u;const c="Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?{apiKey:"AIzaSyDPjpRmobrdUtIY3hIaNoyox7alxYJH_B8",authDomain:"seo-manager-live.firebaseapp.com",projectId:"seo-manager-live",storageBucket:"seo-manager-live.appspot.com",messagingSenderId:"510256510596",appId:"1:510256510596:web:eae1ccc42cb103b8a7f4d1",measurementId:"G-RED1HCM49W"}:{apiKey:"AIzaSyBD6KEJFm2SVguRDEiqufIlRo5HuHu0IZg",authDomain:"seo-manager-test.firebaseapp.com",projectId:"seo-manager-test",storageBucket:"seo-manager-test.appspot.com",messagingSenderId:"682714204028",appId:"1:682714204028:web:a782b9da96ce811ee606f9",measurementId:"G-PYZDK47B2M"};let v;v=(null===(u=e())||void 0===u?void 0:u.findIndex((e=>"seo-manager"===(null==e?void 0:e.name))))<0?r(c,"seo-manager"):o("seo-manager");const E="v1",p=(e,r="put",o,t,s)=>new Promise(((a,d)=>l(void 0,void 0,void 0,(function*(){var l,u,c,v,p,m,g;try{const l=i();if(!(null==l?void 0:l.projectId))return d({results:!1,error:"Project Id is required"});if(!(null==l?void 0:l.secretKey))return d({results:!1,error:"Project Secret Key is required"});const u=_(e),c=t||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seomanager.dev/api/${E}/${u}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${E}/${u}`:`https://testing.seomanager.dev/api/${E}/${u}`);let v={X_ProjectId:null==l?void 0:l.projectId,X_ProjectKey:(null==l?void 0:l.projectKey)||"",X_ProjectSecretKey:(null==l?void 0:l.secretKey)||""};s&&(v=Object.assign(Object.assign({},v),s));const p=yield n(c,{method:r,url:c,data:o||{},headers:v});return a(null==p?void 0:p.data)}catch(e){return a({results:(null===(u=null===(l=null==e?void 0:e.response)||void 0===l?void 0:l.data)||void 0===u?void 0:u.results)||!1,error:(null===(v=null===(c=null==e?void 0:e.response)||void 0===c?void 0:c.data)||void 0===v?void 0:v.error)||!0,message:(null===(m=null===(p=null==e?void 0:e.response)||void 0===p?void 0:p.data)||void 0===m?void 0:m.message)||(null===(g=null==e?void 0:e.response)||void 0===g?void 0:g.data)||"There was an error on our end! Please try again in a few minutes!"})}})))),_=e=>{let r=e;return"/"===r[0]&&(r=r.replace("/","")),r};t(v);const m=(e,r={})=>(console.log(e,null==r?void 0:r["user-agent"]),new Promise((o=>l(void 0,void 0,void 0,(function*(){try{if("undefined"!=typeof window)throw{error:"This function is only allowed to be called in a server environment, not in the client. If you are using NextJS this belong in getServerSideProps or getStaticProps."};if(!e)throw{error:"You must pass page path!"};const{results:t,error:s}=yield((e,r="put",o,t,s)=>new Promise(((a,d)=>l(void 0,void 0,void 0,(function*(){var l,u,c;try{const c=i();if(!(null==c?void 0:c.projectId))return d({results:!1,error:"Project Id is required"});const v=_(e),p=t||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seomanager.dev/api/${E}/${v}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${E}/${v}`:`https://testing.seomanager.dev/api/${E}/${v}`);let m={X_ProjectId:null==c?void 0:c.projectId,X_ProjectKey:(null==c?void 0:c.projectKey)||""};s&&(m=Object.assign(Object.assign({},m),s));const g=yield n(p,{method:r,data:o||{},headers:m});return(null===(l=null==g?void 0:g.data)||void 0===l?void 0:l.results)?a({results:null===(u=null==g?void 0:g.data)||void 0===u?void 0:u.results}):a(null==g?void 0:g.data)}catch(e){return a({results:!1,data:null===(c=null==e?void 0:e.response)||void 0===c?void 0:c.data})}})))))("/seo/server_get","put",{path:e,headers:r||{}});return o(t?{results:t,error:"",message:"Successful"}:{results:!1,error:s,message:"No SEO data for this page found"})}catch(e){return o({results:!1,error:e.error,message:"Not Successful"})}}))))),g=(e,r={})=>new Promise((o=>l(void 0,void 0,void 0,(function*(){var t;const n=yield m(e,(null===(t=null==r?void 0:r.request)||void 0===t?void 0:t.headers)||{});return o(n)})))),O=e=>new Promise((r=>l(void 0,void 0,void 0,(function*(){var o;try{h();const o=yield p("/backend/validate","put",{queueId:e});return r(o)}catch(e){return r({results:!1,message:(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.error)||(null==e?void 0:e.error)||"Something went wrong",error:!0})}})))),h=()=>{const e=N();if(!(null==e?void 0:e.secretKey))throw{error:"Please add a secretKey by calling the SEOInit function SEOInit({secretKey: <<Add Value Here>>. Make sure you initialize this in your Api, not _app.js!"};if(!(null==e?void 0:e.projectId))throw{error:"Please add a projectId by calling the SEOInit function SEOInit({projectId: <<Add Value Here>>. Make sure you initialize this in your Api, not _app.js!"}};function I(e,r){return new Promise((o=>l(this,void 0,void 0,(function*(){var t;try{if((null==e?void 0:e.length)>50)return o({results:!1,message:"You are limited to 50 inserts at the same time!",error:!0});h();const t=yield p("backend/seo/insert","post",{pageIdentifiers:e,pageSEO:r});return o(t)}catch(e){return console.error(e),o({results:!1,message:(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.error)||(null==e?void 0:e.error)||"Something went wrong",error:!0})}}))))}const y=(e,r,o)=>new Promise((t=>l(void 0,void 0,void 0,(function*(){var n;try{if((null==e?void 0:e.length)>50)return t({results:!1,message:"You are limited to 50 updates at the same time!",error:!0});h();const n=yield p("backend/seo/update","put",{pageIdentifiers:e,pageSEO:r,options:o});return t(n)}catch(e){return console.log("Error:",e),t({results:!1,message:(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.error)||(null==e?void 0:e.error)||"Something went wrong",error:!0})}})))),A=e=>new Promise((r=>l(void 0,void 0,void 0,(function*(){var o;try{if((null==e?void 0:e.length)>50)return r({results:!1,message:"You are limited to 50 deletes at the same time!",error:!0});h();const o=yield p("backend/seo/delete","post",{pageIdentifiers:e});return r(o)}catch(e){return r({results:!1,message:(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.error)||(null==e?void 0:e.error)||"Something went wrong",error:!0})}})))),f=e=>new Promise((r=>l(void 0,void 0,void 0,(function*(){var o;try{h();const o=yield p("backend/seo/getSeoPages","post",{pageIdentifiers:e});return r(o)}catch(e){return r({results:!1,error:!0,message:(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.error)||(null==e?void 0:e.error)||"Something went wrong"})}})))),N=()=>{let e={};return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID),e};export{s as SEOInit,O as backendValidation,h as checkBackendKeys,A as deleteSeoPage,g as fetchSEO,f as getSeoPages,I as insertSeoPage,i as returnKey,d as returnProject,a as setProject,y as updateSeoPage};
//# sourceMappingURL=index.es.js.map
