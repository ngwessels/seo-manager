"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=()=>{let e={},r=!1;return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY,r=!0),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY,r=!0),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID,r=!0),!!r&&e},r=require("axios"),t=e=>{let r=e;return"/"===r[0]&&(r=r.replace("/","")),r},s=s=>new Promise((async(o,c)=>{try{if(process.browser)throw{error:"This function is only allowed to be called in a server environment, not in the client. If you are using NextJS this belong in getServerSideProps or getStaticProps."};const{results:c,error:a}=await((s,o="put",c,a,n)=>new Promise((async(i,p)=>{try{const E=e();if(!E?.projectId)return p({results:!1,error:"Project Id is required"});const u=t(s),l=a||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/v1/${u}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/v1/${u}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/v1/${u}`);let d={X_ProjectId:E?.projectId,X_ProjectKey:E?.projectKey};n&&(d={...d,...n});const _=await r({method:o||"post",url:l,data:c||{},headers:d});return _?.data?.results?i({results:_?.data?.results}):p({results:!1,error:!1,message:"Not Successful"})}catch(e){return p({results:!1,data:e?.response?.data})}})))("/seo/server_get","put",{path:s});return o(c?{results:c}:{results:!1,error:a,message:"No SEO data for this page found"})}catch(e){return o({results:!1,error:e.error})}}));exports.SEOInit=({projectId:r,projectKey:t,secretKey:s})=>{(({projectId:r,projectKey:t,secretKey:s})=>{let o={...e()||{}};if(r&&(o.projectId=r,process.env.SEO_MANAGER_MODULE_PROJECTID=r),t&&(o.projectKey=t,process.env.SEO_MANAGER_MODULE_PROJECTKEY=t),s&&(o.secretKey=s,process.env.SEO_MANAGER_MODULE_SECRETKEY=s),!o?.projectId)throw"Please add a projectId by calling the SEOInit function SEOInit({projectId: '<<Add Value Here>>'})"})({projectId:r,projectKey:t,secretKey:s})},exports.backendValidation=s=>new Promise((async(o,c)=>{try{const c=e();if(!c?.secretKey)throw{error:"Please add a secretKey by calling the SEOInit function SEOInit({secretKey: '<<Add Value Here>>'}). Make sure you initialize this in your Api, not _app.js!"};if(!c?.projectId)throw{error:"Please add a projectId by calling the SEOInit function SEOInit({projectId: '<<Add Value Here>>'}). Make sure you initialize this in your Api, not _app.js!"};const a=await((s,o="put",c,a,n)=>new Promise((async(i,p)=>{try{const E=e();if(!E?.projectId)return p({results:!1,error:"Project Id is required"});if(!E?.secretKey)return p({results:!1,error:"Project Secret Key is required"});const u=t(s),l=a||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/v1/${u}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/v1/${u}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/v1/${u}`);let d={X_ProjectId:E?.projectId,X_ProjectKey:E?.projectKey,X_ProjectSecretKey:E?.secretKey};n&&(d={...d,...n});const _=await r({method:o||"post",url:l,data:c||{},headers:d});return _?.data?.results?i({results:_?.data?.results}):p({results:!1,error:!1,message:"Not Successful"})}catch(e){return p({results:!1,data:e?.response?.data})}})))("/backend/validate","put",{queueId:s});return o(a)}catch(e){return o({results:!1,error:e?.data?.error||e?.error||"Something went wrong"})}})),exports.fetchSEO=e=>new Promise((async(r,t)=>r(await s(e))));
