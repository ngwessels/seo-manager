"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);const s=()=>{let e={},t=!1;return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID,t=!0),!!t&&e},o=require("axios"),a="v1",n=(e,t="put",r,n,E)=>new Promise((async(p,_)=>{try{const i=s();if(!i?.projectId)return _({results:!1,error:"Project Id is required"});const l=c(e),d=n||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/${a}/${l}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${a}/${l}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/${a}/${l}`);let u={X_ProjectId:i?.projectId,X_ProjectKey:i?.projectKey};E&&(u={...u,...E});const O=await o({method:t||"post",url:d,data:r||{},headers:u});return p(O?.data?.results?{results:O?.data?.results}:{results:O?.data?.results||!1,error:O?.data?.error||!0,message:O?.data?.message||"There was an error on our end! Please try again in a few mintues!"})}catch(e){return p({results:!1,data:e?.response?.data})}})),c=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t};class E extends r.default.Component{static async getInitialProps({res:e,req:t}){e.setHeader("Content-Type","text/xml");try{const{results:r}=await n("/sitemap/","put",{path:t.url,headers:t.headers});e.write(r)}catch(e){console.error(e.error)}e.end()}}class p extends e.Component{static async getInitialProps({res:e,req:t}){e.setHeader("Content-Type","text/plain");try{const{results:r}=await n("/robots/","put",{headers:t.headers});e.write(r)}catch(e){console.error(e.error)}e.end()}}exports.RobotsHelper=p,exports.SEOinitialize=({projectId:e,projectKey:t,secretKey:r})=>{let o={...s()||{}};if(e&&(o.projectId=e,process.env.SEO_MANAGER_MODULE_PROJECTID=e),t&&(o.projectKey=t,process.env.SEO_MANAGER_MODULE_PROJECTKEY=t),r&&(o.secretKey=r,process.env.SEO_MANAGER_MODULE_SECRETKEY=r),!o?.projectId)throw"Please add a projectId by calling the SEOInit function SEOInit({projectId: '<<Add Value Here>>'})"},exports.SitemapHelper=E,exports.returnKey=s,exports.returnProject=()=>{const e=process.env.SEO_MANAGER_MODULE_PROJECT;return e?JSON.parse(e):null},exports.setProject=e=>{process.env.SEO_MANAGER_MODULE_PROJECT=JSON.stringify(e)};
