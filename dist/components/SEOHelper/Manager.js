import{__awaiter as e}from"../../node_modules/tslib/tslib.es6.js";import t from"react";import{firebase as a}from"../../firebase.js";import{n}from"../../node_modules/@firebase/auth/dist/esm2017/index-6de4cbb9.js";import"../../node_modules/@firebase/app/dist/esm/index.esm2017.js";import"../../node_modules/@firebase/logger/dist/esm/index.esm2017.js";import{serverCall as i}from"../../utils/call.js";import l from"../../node_modules/react-tag-autocomplete/dist/ReactTags.esm.js";import o from"./PagePhoto.js";import{hideModal as r,authSignOut as s}from"./utils.js";import d from"../../node_modules/@mui/material/CircularProgress/CircularProgress.js";import m from"../../node_modules/@mui/material/DialogContent/DialogContent.js";import c from"../../node_modules/@mui/material/Grid/Grid.js";import h from"../../node_modules/@mui/material/Typography/Typography.js";import u from"../../node_modules/@mui/material/TextField/TextField.js";import p from"../../node_modules/@mui/material/FormControl/FormControl.js";import g from"../../node_modules/@mui/material/InputLabel/InputLabel.js";import v from"../../node_modules/@mui/material/Select/Select.js";import f from"../../node_modules/@mui/material/MenuItem/MenuItem.js";import E from"../../node_modules/@mui/material/Button/Button.js";import y from"../../node_modules/@mui/material/DialogActions/DialogActions.js";import w from"../../node_modules/@mui/lab/LoadingButton/LoadingButton.js";const b=n(a);class C extends t.Component{constructor(a){super(a),this.componentDidMount=()=>e(this,void 0,void 0,(function*(){var t;this.setState({loading:!0}),null===(t=null==b?void 0:b.currentUser)||void 0===t||t.getIdToken().then((t=>e(this,void 0,void 0,(function*(){var e;const a=yield i("/seo/get","put",{path:this.props.data.path},void 0,{X_Authorization:t,AuthorizationId:null===(e=null==b?void 0:b.currentUser)||void 0===e?void 0:e.uid});a&&this.props.onChange(null==a?void 0:a.results,!0),this.setState({loading:!1})}))))})),this.onChange=(e,t)=>{let a=Object.assign({},this.props.data);a[t]||""===a[t]?(a[t]=e,this.props.onChange(a,!1),this.setState({data:a})):this.setState({[t]:e})},this.onDelete=e=>{let t=this.props.data.keywordsArray;t.splice(e,1);let a="";Object.keys(t).forEach((e=>{const n=t[e];a+=`${n.name}, `})),this.onChange(t,"keywordsArray"),this.onChange(a,"keywords")},this.onAddition=e=>{let t=this.props.data.keywordsArray;t.push({name:e.name,id:t.length});let a="";Object.keys(t).forEach((e=>{const n=t[e];a+=`${n.name}, `})),this.onChange(t,"keywordsArray"),this.onChange(a,"keywords")},this.addPerformAction=(e,t)=>{let a=this.state.performActionOnUpdate;a[t]=e,this.setState({performActionOnUpdate:a})},this.saveData=()=>{var t;this.setState({saving:!0}),null===(t=null==b?void 0:b.currentUser)||void 0===t||t.getIdToken().then((t=>e(this,void 0,void 0,(function*(){var a;const n=Object.keys(this.state.performActionOnUpdate).map((t=>e(this,void 0,void 0,(function*(){const e=this.state.performActionOnUpdate[t];return e&&e.action&&(yield e.action()),!0}))));yield Promise.all(n),yield i("/seo/update","put",{data:this.props.data},void 0,{X_Authorization:t,AuthorizationId:null===(a=null==b?void 0:b.currentUser)||void 0===a?void 0:a.uid}),this.setState({saving:!1}),this.props.onChangeComplete(this.props.data.path),r()}))))},this.state={loading:!0,saving:!1,newImage:"",file:null,performActionOnUpdate:{},photoManager:!0},this.reactTags=t.createRef()}render(){var e,a,n,i;return t.createElement(t.Fragment,null,this.state.loading?t.createElement("div",{style:{width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"}},t.createElement(d,null)):t.createElement(t.Fragment,null,t.createElement(m,{dividers:!0},t.createElement(c,{item:!0,xs:12},t.createElement(h,{variant:"h4",textAlign:"center"},"Basic SEO")),t.createElement(c,{item:!0,xs:12},t.createElement("div",{className:"form-floating mb-3"},t.createElement(o,{onChange:this.onChange,image:this.props.data.image,newImage:this.state.newImage,addPerformActionOnUpdate:this.addPerformAction,data:this.props.data,file:this.state.file,user:this.props.user}))),t.createElement(c,{item:!0,mb:1},t.createElement(u,{id:"title",label:"Title",variant:"standard",placeholder:"Home - Stark Industries",onChange:e=>{this.onChange(e.target.value,"title")},value:this.props.data.title,style:{width:"100%"},helperText:`${(null===(e=this.props.data)||void 0===e?void 0:e.title.length)||0} of 60`})),t.createElement(c,{item:!0,mb:1},t.createElement(u,{id:"description",label:"Description",variant:"standard",placeholder:"",onChange:e=>{this.onChange(e.target.value,"description")},value:null===(a=this.props.data)||void 0===a?void 0:a.description,style:{width:"100%"},multiline:!0,helperText:`${(null===(n=this.props.data)||void 0===n?void 0:n.description.length)||0} of 160`})),t.createElement(l,{ref:this.reactTags,tags:this.props.data.keywordsArray,onDelete:this.onDelete,onAddition:this.onAddition,placeholderText:"Add Page Keywords",allowNew:!0,allowBackspace:!0}),t.createElement(c,{item:!0,mb:1},t.createElement(p,{variant:"standard",sx:{minWidth:"100%"}},t.createElement(g,{id:"follow"},"Should search engines follow the page?"),t.createElement(v,{labelId:"follow",id:"follow-select",value:this.props.data.follow,onChange:e=>{this.onChange(e.target.value,"follow")},label:"Should search engines follow the page?",style:{zIndex:10}},t.createElement(f,{value:""},"Open this Select Menu"),t.createElement(f,{value:"follow"},"Follow"),t.createElement(f,{value:"nofollow"},"No Follow")))),t.createElement(c,{item:!0,mb:1},t.createElement(p,{variant:"standard",sx:{minWidth:"100%"}},t.createElement(g,{id:"index"},"Should search engines index the page?"),t.createElement(v,{labelId:"index",id:"index-select",value:this.props.data.index,onChange:e=>{this.onChange(e.target.value,"index")},label:"Should search engines index the page?"},t.createElement(f,{value:""},"Open this Select Menu"),t.createElement(f,{value:"index"},"Index"),t.createElement(f,{value:"noindex"},"No Index")))),t.createElement(c,{item:!0,mb:1},t.createElement(p,{variant:"standard",sx:{minWidth:"100%"}},t.createElement(g,{id:"changeFreq"},"How often will the content change?"),t.createElement(v,{labelId:"changeFreq",id:"changeFreq-select",value:this.props.data.changeFreq,onChange:e=>{this.onChange(e.target.value,"changeFreq")},label:"How often will the content change?"},t.createElement(f,null,"Open this select menu"),t.createElement(f,{value:"always"},"Always"),t.createElement(f,{value:"daily"},"Daily"),t.createElement(f,{value:"weekly"},"Weekly"),t.createElement(f,{value:"monthly"},"Monthly"),t.createElement(f,{value:"yearly"},"Yearly"),t.createElement(f,{value:"never"},"Never")))),t.createElement(c,{item:!0,mb:1},t.createElement(p,{variant:"standard",sx:{minWidth:"100%"}},t.createElement(g,{id:"priority"},"Page Prority (10 Highest)"),t.createElement(v,{labelId:"priority",id:"priority-select",value:this.props.data.priority,onChange:e=>{this.onChange(e.target.value,"priority")},label:"Page Priority (10 being the highest)"},t.createElement(f,null,"Open this select menu"),t.createElement(f,{value:.1},"1"),t.createElement(f,{value:.2},"2"),t.createElement(f,{value:.3},"3"),t.createElement(f,{value:.4},"4"),t.createElement(f,{value:.5},"5"),t.createElement(f,{value:.6},"6"),t.createElement(f,{value:.7},"7"),t.createElement(f,{value:.8},"8"),t.createElement(f,{value:.9},"9"),t.createElement(f,{value:1},"10")))),t.createElement(c,{item:!0,mb:1},t.createElement(u,{id:"ldJson",label:"Structured Data",variant:"standard",placeholder:"",onChange:e=>{this.onChange(e.target.value,"ldJson")},value:null===(i=this.props.data)||void 0===i?void 0:i.ldJson,style:{width:"100%"},multiline:!0})),t.createElement(c,{item:!0,mb:1,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},t.createElement(E,{variant:"text",onClick:s,type:"button"},"Sign Out"))),t.createElement(y,null,t.createElement("div",{className:"modal-footer",style:{width:"100%"}},t.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},t.createElement(E,{variant:"text",id:"close-seo-manager",onClick:this.props.resetData,type:"button"},"Close"),t.createElement(w,{variant:"text",onClick:this.saveData,type:"button",loading:this.state.saving},"Save"))))))}}export default C;
//# sourceMappingURL=Manager.js.map
