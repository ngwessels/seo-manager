"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(require("react"));const r=require("axios"),s="v1",a=(e,t="put",a,n,E)=>new Promise((async(c,p)=>{try{const _=(()=>{let e={},t=!1;return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID,t=!0),!!t&&e})();if(!_?.projectId)return p({results:!1,error:"Project Id is required"});const u=o(e),l=n||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/${s}/${u}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${s}/${u}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/${s}/${u}`);let i={X_ProjectId:_?.projectId,X_ProjectKey:_?.projectKey};E&&(i={...i,...E});const d=await r({method:t||"post",url:l,data:a||{},headers:i});return c(d?.data?.results?{results:d?.data?.results}:{results:d?.data?.results||!1,error:d?.data?.error||!0,message:d?.data?.message||"There was an error on our end! Please try again in a few mintues!"})}catch(e){return c({results:!1,data:e?.response?.data})}})),o=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t};class n extends t.default.Component{static async getInitialProps({res:e,req:t}){e.setHeader("Content-Type","text/xml");try{const{results:r}=await a("/sitemap/","put",{path:t.url,headers:t.headers});e.write(r)}catch(e){console.error(e.error)}e.end()}}module.exports=n;
