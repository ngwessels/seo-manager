import e from"react";const t=require("axios"),r="v1",s=(e,s="put",a,E,c)=>new Promise((async(n,p)=>{try{const _=(()=>{let e={};return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID),e})();if(!_?.projectId)return p({results:!1,error:"Project Id is required"});const d=o(e),l=E||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seomanager.dev/api/${r}/${d}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${r}/${d}`:`https://testing.seomanager.dev/api/${r}/${d}`);let O={X_ProjectId:_?.projectId,X_ProjectKey:_?.projectKey};c&&(O={...O,...c});const i=await t({method:s||"post",url:l,data:a||{},headers:O});return n(i?.data?.results?{results:i?.data?.results}:i?.data)}catch(e){return n({results:!1,data:e?.response?.data})}})),o=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t};class a extends e.Component{static async getInitialProps({res:e,req:t}){e.setHeader("Content-Type","text/xml");try{const{results:r}=await s("/sitemap/","put",{path:t.url,headers:t.headers});e.write(r)}catch(e){console.error(e.error)}e.end()}}export{a as default};
