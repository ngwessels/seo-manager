import e from"react";const r=require("axios"),t="v1",s=(e,s="put",o,E,n)=>new Promise((async(c,p)=>{try{const _=(()=>{let e={},r=!1;return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY,r=!0),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY,r=!0),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID,r=!0),!!r&&e})();if(!_?.projectId)return p({results:!1,error:"Project Id is required"});const l=a(e),i=E||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/${t}/${l}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/${t}/${l}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/${t}/${l}`);let d={X_ProjectId:_?.projectId,X_ProjectKey:_?.projectKey};n&&(d={...d,...n});const u=await r({method:s||"post",url:i,data:o||{},headers:d});return c(u?.data?.results?{results:u?.data?.results}:{results:u?.data?.results||!1,error:u?.data?.error||!0,message:u?.data?.message||"There was an error on our end! Please try again in a few mintues!"})}catch(e){return c({results:!1,data:e?.response?.data})}})),a=e=>{let r=e;return"/"===r[0]&&(r=r.replace("/","")),r};class o extends e.Component{static async getInitialProps({res:e,req:r}){e.setHeader("Content-Type","text/xml");try{const{results:t}=await s("/sitemap/","put",{path:r.url,headers:r.headers});e.write(t)}catch(e){console.error(e.error)}e.end()}}export{o as default};
