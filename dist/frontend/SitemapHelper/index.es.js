import e from"react";const t=require("axios"),r=(e,r="put",o,a,E)=>new Promise((async(c,p)=>{try{const n=(()=>{let e={},t=!1;return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY,t=!0),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID,t=!0),!!t&&e})();if(!n?.projectId)return p({results:!1,error:"Project Id is required"});const _=s(e),l=a||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://seo-manager-website.vercel.app/api/v1/${_}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3001/api/v1/${_}`:`https://seo-manager-website-git-testing-shadow-republic.vercel.app/api/v1/${_}`);let i={X_ProjectId:n?.projectId,X_ProjectKey:n?.projectKey};E&&(i={...i,...E});const u=await t({method:r||"post",url:l,data:o||{},headers:i});return u?.data?.results?c({results:u?.data?.results}):p({results:!1,error:!1,message:"Not Successful"})}catch(e){return p({results:!1,data:e?.response?.data})}})),s=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t};class o extends e.Component{static async getInitialProps({res:e,req:t}){e.setHeader("Content-Type","text/xml");try{const{results:s}=await r("/sitemap/","put",{path:t.url});e.write(s)}catch(e){console.error(e.error)}e.end()}}export{o as default};
