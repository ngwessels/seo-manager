"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("axios"));function r(e,t,r,o){return new(r||(r=Promise))(function(n,s){function l(e){try{a(o.next(e))}catch(e){s(e)}}function i(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(l,i)}a((o=o.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const o=(e,o="put",s,l,i)=>new Promise((a,d)=>r(void 0,void 0,void 0,function*(){var r,u,c,v,p,E,g,_,h,f,m;try{const v=(()=>{let e={};return process.env.SEO_MANAGER_MODULE_SECRETKEY&&(e.secretKey=process.env.SEO_MANAGER_MODULE_SECRETKEY),process.env.SEO_MANAGER_MODULE_PROJECTKEY&&(e.projectKey=process.env.SEO_MANAGER_MODULE_PROJECTKEY),process.env.SEO_MANAGER_MODULE_PROJECTID&&(e.projectId=process.env.SEO_MANAGER_MODULE_PROJECTID),e})();if(!(null==v?void 0:v.projectId))return d({results:!1,error:"Project Id is required"});if(!(null==v?void 0:v.secretKey))return d({results:!1,error:"Project Secret Key is required"});const p=n(e),E=l||("Test"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER&&"Development"!==process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`https://v1.seomanager.dev/${p}`:"Test"===process.env.NEXT_PUBLIC_NODE_ENV_MANAGER?`http://localhost:3002/${p}`:`https://v1-testing.seomanager.dev/${p}`);let g={X_ProjectId:null==v?void 0:v.projectId,X_ProjectKey:(null==v?void 0:v.projectKey)||"",X_ProjectSecretKey:(null==v?void 0:v.secretKey)||""};i&&(g=Object.assign(Object.assign({},g),i));const _=yield t.default(E,{method:o,url:E,data:s||{},headers:g});return a(Object.assign(Object.assign({},(null==_?void 0:_.data)||{}),{results:null===(r=null==_?void 0:_.data)||void 0===r?void 0:r.results,error:(null===(u=null==_?void 0:_.data)||void 0===u?void 0:u.error)||!1,message:(null===(c=null==_?void 0:_.data)||void 0===c?void 0:c.message)||"Successful",statusCode:_.status}))}catch(e){return console.log("SERVER SECRET CALL ERROR:",e),a(Object.assign(Object.assign({},(null===(v=null==e?void 0:e.response)||void 0===v?void 0:v.data)||{}),{results:(null===(E=null===(p=null==e?void 0:e.response)||void 0===p?void 0:p.data)||void 0===E?void 0:E.results)||!1,error:(null===(_=null===(g=null==e?void 0:e.response)||void 0===g?void 0:g.data)||void 0===_?void 0:_.error)||!0,message:(null===(f=null===(h=null==e?void 0:e.response)||void 0===h?void 0:h.data)||void 0===f?void 0:f.message)||(null===(m=null==e?void 0:e.response)||void 0===m?void 0:m.data)||"There was an error on our end! Please try again in a few minutes!",statusCode:e.response.status}))}})),n=e=>{let t=e;return"/"===t[0]&&(t=t.replace("/","")),t};exports.createFallbackSitemapXml=function(e){return`<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n  <url>\n    <loc>${e}</loc>\n    <lastmod>${(new Date).toISOString().split("T")[0]}</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>1.0</priority>\n  </url>\n</urlset>`},exports.extractRequestDataFromRequest=function(e){var t,r,o,n,s,l,i,a;return{path:new URL(e.url).pathname,headers:{"user-agent":(null===(r=null===(t=e.headers)||void 0===t?void 0:t.get)||void 0===r?void 0:r.call(t,"user-agent"))||"",accept:(null===(n=null===(o=e.headers)||void 0===o?void 0:o.get)||void 0===n?void 0:n.call(o,"accept"))||"","accept-language":(null===(l=null===(s=e.headers)||void 0===s?void 0:s.get)||void 0===l?void 0:l.call(s,"accept-language"))||"","cache-control":(null===(a=null===(i=e.headers)||void 0===i?void 0:i.get)||void 0===a?void 0:a.call(i,"cache-control"))||""}}},exports.generateSitemapXml=function(e={}){return r(this,void 0,void 0,function*(){try{const t=yield o("/sitemap/","put",{path:e.path,headers:e.headers||{}});if(t.results&&"string"==typeof t.results)return t.results;throw new Error(`Invalid response format: ${JSON.stringify(t)}`)}catch(e){throw console.error("Sitemap generation error:",e),new Error(`Failed to generate sitemap: ${e.message||e}`)}})};
